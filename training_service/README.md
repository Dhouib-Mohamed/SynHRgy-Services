# SOAP API Proof-of-Concept (PoC)

This PoC demonstrates a SOAP (XML) API with simple routes designed for onboarding candidates. The API accepts an `employee_id`, retrieves mock employee details, and generates a mock onboarding email.

---

## Setup Instructions

### Prerequisites

- Python **3.8.9**
- `pip3` (Python package installer)

### Installation

1. Navigate to the `training_service` directory.
2. Install the required dependencies:
   ```bash
   pip3 install -r ./training_service/requirements.txt
   ```


3. Ensure you're using Python 3.8.9 to avoid compatibility issues.

---

## Running the Application

To start the SOAP API server, you have two options:

1. **Run the Python script directly**:
   ```bash
   python3 ./training_service/main.py
   ```


Alternatively, use the make command:

```bash
   make run-server
```



## Testing the Route

Once the API is running and listening, you can test the `/onboard_candidate` route.

### Sending a SOAP Request

To send a SOAP request using the Makefile:

1. Navigate to the `training_service` directory.
2. Run the following command, replacing `9999` with the desired `employee_id`:
   make send-request EMPLOYEE_ID=9999

### Viewing the SOAP Response

To view the response generated by the API, use the following command:

make view-response

### Cleaning Generated Files

To clean up the generated SOAP request and response files:

make clean

---

## Example SOAP Request and Response

### SOAP Request

Below is an example SOAP request generated when you run `make send-request`:

<pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none">xml</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center select-none py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-xml"><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://example.com/onboarding">
   <soapenv:Header/>
   <soapenv:Body>
      <tns:onboard_candidate>
         <tns:employee_id>9999</tns:employee_id>
      </tns:onboard_candidate>
   </soapenv:Body>
</soapenv:Envelope>
</code></div></div></pre>

### SOAP Response

Hereâ€™s an example SOAP response viewed using `make view-response`:

<pre class="!overflow-visible"><div class="contain-inline-size rounded-md border-[0.5px] border-token-border-medium relative bg-token-sidebar-surface-primary dark:bg-gray-950"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between rounded-t-md h-9 bg-token-sidebar-surface-primary dark:bg-token-main-surface-secondary select-none">xml</div><div class="sticky top-9 md:top-[5.75rem]"><div class="absolute bottom-0 right-2 flex h-9 items-center"><div class="flex items-center rounded bg-token-sidebar-surface-primary px-2 font-sans text-xs text-token-text-secondary dark:bg-token-main-surface-secondary"><span class="" data-state="closed"><button class="flex gap-1 items-center select-none py-1"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 5C7 3.34315 8.34315 2 10 2H19C20.6569 2 22 3.34315 22 5V14C22 15.6569 20.6569 17 19 17H17V19C17 20.6569 15.6569 22 14 22H5C3.34315 22 2 20.6569 2 19V10C2 8.34315 3.34315 7 5 7H7V5ZM9 7H14C15.6569 7 17 8.34315 17 10V15H19C19.5523 15 20 14.5523 20 14V5C20 4.44772 19.5523 4 19 4H10C9.44772 4 9 4.44772 9 5V7ZM5 9C4.44772 9 4 9.44772 4 10V19C4 19.5523 4.44772 20 5 20H14C14.5523 20 15 19.5523 15 19V10C15 9.44772 14.5523 9 14 9H5Z" fill="currentColor"></path></svg>Copier le code</button></span></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre hljs language-xml"><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <tns:onboard_candidateResponse xmlns:tns="http://example.com/onboarding">
         <tns:result>
            Mock email created for Employee ID 9999:
          
            Subject: Welcome to the Team!

            Dear John Doe,

            We are excited to have you join us. Your onboarding meeting is scheduled based on your start date (2024-12-15). Details have been sent to your email address (employee9999@example.com).

            Welcome aboard!

            Best Regards,
            HR Team
         </tns:result>
      </tns:onboard_candidateResponse>
   </soapenv:Body>
</soapenv:Envelope>
</code></div></div></pre>

---

## Notes

* Ensure the SOAP API server is running before testing the routes.
* Use the Makefile for simplified testing and automation.
* The PoC uses mock data for employee details, simulating ESB interaction.
*
